var PieceMakerApi=function(){var e=void 0,g=void 0,j=!1,b=void 0,f=function(){},l=function(a,c,d,e,f){g&&g.api_key&&(e&&!("api_key"in e)?e.api_key=g.api_key:e||(e={api_key:g.api_key}));jQuery.ajax({url:c,type:d,dataType:"json",data:e,context:a,success:f,error:function(a){b&&b.pmError&&b.pmError(a)},xhrFields:{withCredentials:!0}})},h=function(a,b){l(a,b.url,"get",null,b.success)},i=function(b,c){l(b,c.url,"post",c.data,c.success)},d=function(a){b=a.listener||{};g={login:a.user||!1,password:a.pass||
!1,api_key:a.api_key||!1};e=a.baseUrl||"http://localhost:3000"};d.prototype.login=function(a){var c=a||b&&b.pmDataAvailable||f;1==arguments.length?c=arguments[0]:2==arguments.length&&(g={login:arguments[0],password:arguments[1]});i(this,{url:e+"/api/login",data:{login:g.login,password:g.password,api_key:g.api_key},success:function(k){k.status?(j=!0,c.call(a||b,d.USER,k)):b&&"pmLoginFailed"in b&&b.pmLoginFailed()}})};d.USER=0;d.PIECE=1;d.PIECES=2;d.EVENT=3;d.EVENTS=4;d.VIDEO=5;d.VIDEOS=6;d.prototype.loadPiece=
function(a,c){callback=c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/piece/"+a,success:function(a){callback.call(c||b,d.PIECE,a)}})};d.prototype.loadPieces=function(a){callback=a||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/pieces",success:function(c){callback.call(a||b,d.PIECES,c)}})};d.prototype.loadEventsForPiece=function(a,c){callback=c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/piece/"+a+"/events",success:function(a){callback.call(c||b,d.EVENTS,a)}})};d.prototype.loadVideosForPiece=function(a,
c){callback=c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/piece/"+a+"/videos",success:function(a){callback.call(c||b,d.VIDEOS,a)}})};d.prototype.loadVideo=function(a,c){callback=c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/video/"+a,success:function(a){callback.call(c||b,d.VIDEO,a)}})};d.prototype.loadEventsForVideo=function(a,c){callback=c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/video/"+a+"/events",success:function(a){callback.call(c||b,d.EVENTS,a)}})};d.prototype.loadEvent=function(a,c){callback=
c||b&&b.pmDataAvailable||f;h(this,{url:e+"/api/event/"+a,success:function(a){callback.call(c||b,d.EVENT,a)}})};d.prototype.createEvent=function(a,c){callback=c||b&&b.pmDataAvailable||f;i(this,{url:e+"/api/event",data:a,success:function(a){callback.call(c||b,d.EVENT,a)}})};d.prototype.saveEvent=function(a,c,g){callback=g||b&&b.pmDataAvailable||f;i(this,{url:e+"/api/event/"+a+"/update",data:c,success:function(a){callback.call(g||b,d.EVENT,a)}})};d.prototype.deleteEvent=function(a,c){callback=c||b&&
b.pmDataAvailable||f;"object"===typeof a&&"id"in a&&(a=a.id);i(this,{url:e+"/api/event/"+a+"/delete",success:function(a){callback.call(c||b,d.EVENT,a)}})};d.prototype.isLoggedIn=function(){return j};return d}();if(!("$"in this))var $={ajax:function(){}};